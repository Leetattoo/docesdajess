


<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel Doces da Jess</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Paleta de Cores Baseada no Logo/Cart√£o */
      :root {
        --cor-principal-rosa: #fecdd3; /* bg-rose-200 */
        --cor-secundaria-rosa: #fda4af; /* bg-rose-300 */
        --cor-destaque-rosa: #f43f5e; /* bg-rose-500 */
        --cor-texto-escuro: #374151; /* text-gray-700 */
        --cor-texto-claro: #ffffff;
        --cor-roxo: #c084fc; /* purple-400 */
        --cor-turquesa: #2dd4bf; /* teal-400 */
        --cor-amarelo-claro: #fef9c3; /* yellow-100 - do cart√£o */
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--cor-principal-rosa); /* Fundo rosa claro */
        color: var(--cor-texto-escuro);
      }
      .brand-font {
        font-family: 'Pacifico', cursive;
      }
      #logoPreview, #sidebarLogo {
        max-width: 150px;
        max-height: 150px;
        margin: 0 auto 1rem;
        border-radius: 8px;
        object-fit: contain;
        display: block;
      }
      .action-button {
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
        cursor: pointer;
        margin-right: 0.25rem;
        transition: background-color 0.2s ease;
      }
      .edit-button {
        background-color: var(--cor-turquesa); /* Azul/Turquesa */
        color: var(--cor-texto-claro);
      }
      .edit-button:hover {
        background-color: #14b8a6; /* teal-500 */
      }
      .delete-button {
        background-color: var(--cor-destaque-rosa); /* Vermelho/Rosa forte */
        color: var(--cor-texto-claro);
      }
      .delete-button:hover {
        background-color: #e11d48; /* rose-600 */
      }
      /* Sidebar com gradiente do cart√£o */
      .sidebar-gradient {
         background: linear-gradient(to bottom, var(--cor-amarelo-claro), var(--cor-principal-rosa));
         color: var(--cor-texto-escuro); /* Texto escuro para contraste */
      }
      .sidebar-button {
         color: var(--cor-texto-escuro);
         transition: background-color 0.2s ease, color 0.2s ease;
      }
      .sidebar-button:hover {
         background-color: var(--cor-secundaria-rosa);
         color: var(--cor-texto-claro);
      }
      .section-header {
          color: var(--cor-destaque-rosa);
          border-bottom: 2px solid var(--cor-secundaria-rosa);
          padding-bottom: 0.5rem;
      }
      .card {
          background-color: var(--cor-texto-claro);
          padding: 1rem;
          border-radius: 0.5rem;
          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
      }
      thead {
          background-color: var(--cor-secundaria-rosa);
          color: var(--cor-texto-claro);
      }
      /* Ajuste para inputs e selects */
      input[type="text"], input[type="number"], input[type="date"], select {
          border: 1px solid var(--cor-secundaria-rosa);
      }
      button[type="submit"], .primary-button {
          background-color: var(--cor-destaque-rosa);
          color: var(--cor-texto-claro);
          transition: background-color 0.2s ease;
      }
       button[type="submit"]:hover, .primary-button:hover {
           background-color: #e11d48; /* rose-600 */
       }
       .secondary-button {
           background-color: #9ca3af; /* gray-400 */
           color: var(--cor-texto-claro);
           transition: background-color 0.2s ease;
       }
       .secondary-button:hover {
            background-color: #6b7280; /* gray-500 */
       }
    </style>
  </head>
  <body class="bg-pink-50 text-gray-700">
    <div class="flex h-screen">
      <!-- Sidebar -->
      <aside class="w-60 sidebar-gradient flex flex-col p-4 space-y-2 shadow-xl overflow-y-auto">
        <h1 class="text-3xl brand-font text-center mb-2 text-rose-500">Doces da Jess</h1>
        <img id="sidebarLogo" src="data:image/jpeg;base64,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" alt="Logo Doces da Jess" />
        <div class="text-center text-sm mb-4 space-y-1 text-gray-600">
            <p><a href="https://www.instagram.com/docesdajess_sp" target="_blank" class="hover:text-rose-500 transition-colors"><i data-lucide="instagram" class="inline-block w-4 h-4 mr-1"></i> @docesdajess_sp</a></p>
            <p><a href="https://wa.me/5511961510581" target="_blank" class="hover:text-rose-500 transition-colors"><i data-lucide="phone" class="inline-block w-4 h-4 mr-1"></i> (11) 96151-0581</a></p>
        </div>
        <button onclick="showSection('inicio_dashboard')" class="sidebar-button p-2 rounded text-left">In√≠cio / Dashboard</button>
        <button onclick="showSection('vendas')" class="sidebar-button p-2 rounded text-left">Vendas</button>
        <button onclick="showSection('produtos')" class="sidebar-button p-2 rounded text-left">Produtos/Card√°pio</button>
        <button onclick="showSection('estoque')" class="sidebar-button p-2 rounded text-left">Estoque</button>
        <button onclick="showSection('clientes')" class="sidebar-button p-2 rounded text-left">Clientes</button>
        <button onclick="showSection('relatorios')" class="sidebar-button p-2 rounded text-left">Relat√≥rios</button>
        <button onclick="showSection('graficos_avancados')" class="sidebar-button p-2 rounded text-left">Gr√°ficos e An√°lises</button>
        <button onclick="showSection('meta')" class="sidebar-button p-2 rounded text-left">Meta Di√°ria</button>
        <!-- Bot√£o Jeh AI com estilo destacado -->
        <button onclick="mostrarJehAI()" class="p-2 rounded text-left mt-4 mb-2 text-white font-bold shadow-lg" style="background: linear-gradient(135deg, var(--cor-destaque-rosa), var(--cor-roxo), var(--cor-turquesa)); border: none; transition: all 0.3s ease;">
          <span class="flex items-center justify-center">
            <i data-lucide="bot" class="inline-block w-5 h-5 mr-2"></i>
            Jeh AI
          </span>
        </button>
        <button onclick="abrirJehAI()" class="sidebar-button p-2 rounded text-left border border-rose-300 bg-gradient-to-r from-pink-400 to-purple-500 text-white hover:from-pink-500 hover:to-purple-600 transition-all duration-300 transform hover:scale-105 shadow-lg">
          <span class="flex items-center">
            <i data-lucide="message-circle-heart" class="inline-block w-5 h-5 mr-2"></i>
            Fale com a Jeh AI üí¨
          </span>
        </button>
        <button onclick="exportarDados()" class="sidebar-button p-2 rounded text-left border border-rose-300">Exportar Dados</button>
        <label class="sidebar-button p-2 rounded text-left border border-rose-300 cursor-pointer">
            Importar Dados
            <input type="file" id="importFile" accept=".json" onchange="importarDados(event)" class="hidden"/>
        </label>
      </aside>

      <!-- Main content -->
      <main class="flex-1 overflow-y-auto p-6">



        <!-- Se√ß√£o In√≠cio / Dashboard -->
        <section id="inicio_dashboard" class="section">
          <h2 class="text-2xl font-bold mb-4 section-header">Informa√ß√µes da Empresa</h2>
          <ul class="space-y-2 mb-6 card">
            <li><strong>Nome Empresarial:</strong> LEANDRO DE OLIVEIRA CONTRERAS</li>
            <li><strong>Nome Fantasia:</strong> Doces da Jess</li>
            <li><strong>CNPJ:</strong> 60.765.939/0001-79</li>
            <li><strong>Capital Social:</strong> R$3.000</li>
            <li><strong>Endere√ßo:</strong> Rua S√£o Vicente, 121 ‚Äì Bela Vista ‚Äì S√£o Paulo ‚Äì SP ‚Äì CEP 01314-010</li>
            <li><strong>Atividade Principal:</strong> Fabrica√ß√£o de produtos de padaria e confeitaria com produ√ß√£o pr√≥pria</li>
            <li><strong>Atividades Secund√°rias:</strong> Salgados, marmitas, lanches, bebidas, doces diversos e revenda</li>
            <li><strong>Contato:</strong> Instagram: <a href="https://www.instagram.com/docesdajess_sp" target="_blank" class="text-rose-500 hover:underline">@docesdajess_sp</a> | WhatsApp: <a href="https://wa.me/5511961510581" target="_blank" class="text-rose-500 hover:underline">(11) 96151-0581</a></li>
          </ul>
          
          <!-- Insights de An√°lise (movidos da se√ß√£o Gr√°ficos e An√°lises) -->
          <h2 class="text-2xl font-bold mb-4 section-header">An√°lises e Sugest√µes</h2>
          <div class="card mb-6">
            <div id="analisesSugestoes" class="space-y-2 text-sm">
              <!-- Conte√∫do gerado via JS -->
              <p>Carregando an√°lises e sugest√µes...</p>
            </div>
          </div>
          
          <h2 class="text-2xl font-bold mb-4 section-header">Dashboard Resumo</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="card">
                <label for="logoInput" class="block font-semibold mb-1">Logo da Empresa (upload):</label>
                <input type="file" id="logoInput" accept="image/*" class="mb-2"/>
                <img id="logoPreview" src="" alt="Pr√©via do Logo" class="hidden" />
            </div>
            <div class="card text-lg font-semibold">
                Lucro Total Estimado: R$ <span id="lucroTotal">0.00</span>
            </div>
          </div>
          <div class="card">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-semibold">Resumo de Vendas</h3>
                <div class="flex items-center space-x-2">
                    <label for="tipoGraficoDashboard" class="text-sm">Tipo de gr√°fico:</label>
                    <select id="tipoGraficoDashboard" class="p-1 border rounded bg-white text-sm">
                        <option value="bar">Barras</option>
                        <option value="line">Linha</option>
                        <option value="pie">Pizza</option>
                    </select>
                    <label for="periodoGraficoDashboard" class="text-sm">Per√≠odo:</label>
                    <select id="periodoGraficoDashboard" class="p-1 border rounded bg-white text-sm">
                        <option value="semanal">Semanal</option>
                        <option value="diario">Di√°rio</option>
                        <option value="mensal">Mensal</option>
                    </select>
                </div>
            </div>
            <canvas id="vendasChart" height="150"></canvas>
          </div>
        </section>

        <!-- Se√ß√£o Vendas -->
        <section id="vendas" class="section hidden">
          <h2 class="text-2xl font-bold mb-4 section-header">Registro de Vendas</h2>
          <form id="vendaForm" class="space-y-4 card mb-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <input type="date" id="dataVenda" class="p-2 border rounded" required />
              <select id="produtoVenda" class="p-2 border rounded bg-white" required>
                  <option value="" disabled selected>Selecione o Produto</option>
              </select>
              <input type="number" id="quantidadeVenda" placeholder="Quantidade" class="p-2 border rounded" required min="1" />
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <input type="number" id="valorVenda" placeholder="Valor Total (R$)" class="p-2 border rounded" required min="0" step="0.01" />
              
              <div>
                <label for="metodoPagamento" class="block text-sm font-medium mb-1">M√©todo de Pagamento:</label>
                <select id="metodoPagamento" class="p-2 border rounded bg-white w-full" required>
                  <option value="" disabled selected>Selecione</option>
                  <option value="Dinheiro">Dinheiro</option>
                  <option value="Cart√£o de D√©bito">Cart√£o de D√©bito</option>
                  <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                  <option value="PIX">PIX</option>
                  <option value="Transfer√™ncia">Transfer√™ncia</option>
                  <option value="Vale Refei√ß√£o">Vale Refei√ß√£o</option>
                  <option value="Outro">Outro</option>
                </select>
              </div>
              
              <div id="parcelamentoContainer" class="hidden">
                <label for="parcelamento" class="block text-sm font-medium mb-1">Parcelamento:</label>
                <div class="flex items-center">
                  <input type="number" id="parcelamento" placeholder="N√∫mero de parcelas" class="p-2 border rounded w-full" min="1" max="12" value="1" />
                  <span class="ml-2 text-sm text-gray-600">x</span>
                </div>
              </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="clienteVenda" class="block text-sm font-medium mb-1">Cliente (opcional):</label>
                <select id="clienteVenda" class="p-2 border rounded bg-white w-full">
                  <option value="">Selecione o Cliente</option>
                  <!-- Op√ß√µes ser√£o preenchidas via JavaScript -->
                </select>
              </div>
              
              <div>
                <label for="observacoesVenda" class="block text-sm font-medium mb-1">Observa√ß√µes:</label>
                <input type="text" id="observacoesVenda" placeholder="Observa√ß√µes adicionais" class="p-2 border rounded w-full" />
              </div>
            </div>
            
            <div class="border rounded p-3 bg-rose-50">
              <h4 class="font-medium mb-2">Verifica√ß√£o de Estoque:</h4>
              <div id="verificacaoEstoqueVenda" class="text-sm">
                <!-- Resultado da verifica√ß√£o de estoque ser√° inserido aqui -->
                <p class="text-gray-600">Selecione um produto e quantidade para verificar disponibilidade.</p>
              </div>
            </div>
            
            <div class="flex justify-between">
              <button type="button" id="verificarEstoqueVendaBtn" class="secondary-button px-4 py-2 rounded" onclick="verificarEstoqueVenda()">Verificar Disponibilidade</button>
              <button type="submit" class="primary-button px-4 py-2 rounded">Registrar Venda</button>
            </div>
          </form>
          
          <h3 class="text-xl font-bold mb-2 section-header">Hist√≥rico de Vendas</h3>
          <div class="card mb-4">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                  <div>
                      <label for="filtroVendasPeriodo" class="block text-sm font-medium mb-1">Filtrar por per√≠odo:</label>
                      <select id="filtroVendasPeriodo" class="p-2 border rounded bg-white w-full">
                          <option value="todos">Todos os per√≠odos</option>
                          <option value="hoje">Hoje</option>
                          <option value="semana">Esta semana</option>
                          <option value="mes">Este m√™s</option>
                          <option value="personalizado">Per√≠odo personalizado</option>
                      </select>
                  </div>
                  <div id="periodoPersonalizadoContainer" class="hidden grid grid-cols-2 gap-2">
                      <div>
                          <label for="dataInicio" class="block text-sm font-medium mb-1">Data inicial:</label>
                          <input type="date" id="dataInicio" class="p-2 border rounded w-full" />
                      </div>
                      <div>
                          <label for="dataFim" class="block text-sm font-medium mb-1">Data final:</label>
                          <input type="date" id="dataFim" class="p-2 border rounded w-full" />
                      </div>
                  </div>
                  <div>
                      <label for="filtroProdutoVenda" class="block text-sm font-medium mb-1">Filtrar por produto:</label>
                      <select id="filtroProdutoVenda" class="p-2 border rounded bg-white w-full">
                          <option value="todos">Todos os produtos</option>
                      </select>
                  </div>
                  <div>
                      <label for="filtroMetodoPagamento" class="block text-sm font-medium mb-1">Filtrar por pagamento:</label>
                      <select id="filtroMetodoPagamento" class="p-2 border rounded bg-white w-full">
                          <option value="todos">Todos os m√©todos</option>
                          <option value="Dinheiro">Dinheiro</option>
                          <option value="Cart√£o de D√©bito">Cart√£o de D√©bito</option>
                          <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                          <option value="PIX">PIX</option>
                          <option value="Transfer√™ncia">Transfer√™ncia</option>
                          <option value="Vale Refei√ß√£o">Vale Refei√ß√£o</option>
                          <option value="Outro">Outro</option>
                      </select>
                  </div>
                  <div>
                      <label for="buscarVenda" class="block text-sm font-medium mb-1">Buscar:</label>
                      <input type="text" id="buscarVenda" placeholder="Buscar por produto..." class="p-2 border rounded w-full" />
                  </div>
              </div>
              <div class="flex justify-end">
                  <button id="aplicarFiltrosVendas" class="primary-button px-4 py-2 rounded">Aplicar Filtros</button>
                  <button id="limparFiltrosVendas" class="secondary-button px-4 py-2 rounded ml-2">Limpar Filtros</button>
              </div>
          </div>
          <div class="card">
              <table class="w-full table-auto">
                <thead>
                  <tr>
                      <th class="p-2 text-left">Data</th>
                      <th class="p-2 text-left">Produto</th>
                      <th class="p-2 text-left">Qtd</th>
                      <th class="p-2 text-left">Valor</th>
                      <th class="p-2 text-left">Pagamento</th>
                      <th class="p-2 text-left">Cliente</th>
                      <th class="p-2 text-left">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody id="vendasTabela"></tbody>
              </table>
          </div>
          
          <!-- Resumo Financeiro -->
          <h3 class="text-xl font-bold mb-2 mt-6 section-header">Resumo Financeiro</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="card p-4">
                  <h4 class="font-medium mb-2">Total por M√©todo de Pagamento</h4>
                  <div id="resumoMetodosPagamento" class="space-y-1 text-sm">
                      <!-- Ser√° preenchido via JavaScript -->
                      <p>Carregando dados...</p>
                  </div>
              </div>
              <div class="card p-4">
                  <h4 class="font-medium mb-2">Vendas por Per√≠odo</h4>
                  <div id="resumoVendasPeriodo" class="space-y-1 text-sm">
                      <!-- Ser√° preenchido via JavaScript -->
                      <p>Carregando dados...</p>
                  </div>
              </div>
              <div class="card p-4">
                  <h4 class="font-medium mb-2">Produtos Mais Vendidos</h4>
                  <div id="resumoProdutosMaisVendidos" class="space-y-1 text-sm">
                      <!-- Ser√° preenchido via JavaScript -->
                      <p>Carregando dados...</p>
                  </div>
              </div>
          </div>
        </section>

        <!-- Se√ß√£o Produtos -->
        <section id="produtos" class="section hidden">
          <h2 class="text-2xl font-bold mb-4 section-header">Produtos / Card√°pio</h2>
          
          <!-- Abas para alternar entre Produtos e Fichas T√©cnicas -->
          <div class="flex border-b border-rose-300 mb-4">
            <button id="abaProdutos" class="py-2 px-4 font-medium border-b-2 border-rose-500 text-rose-500" onclick="mostrarAba('produtos')">Produtos</button>
            <button id="abaFichasTecnicas" class="py-2 px-4 font-medium text-gray-600" onclick="mostrarAba('fichasTecnicas')">Fichas T√©cnicas</button>
          </div>
          
          <!-- Se√ß√£o de Produtos -->
          <div id="secaoProdutos">
              <div class="card mb-6">
                  <h3 class="text-xl font-semibold mb-3">Adicionar/Editar Produto</h3>
                  <form id="produtoForm" class="space-y-3">
                      <input type="hidden" id="produtoId" />
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <input type="text" id="produtoNome" placeholder="Nome do Produto" class="p-2 border rounded" required />
                          <select id="produtoCategoria" class="p-2 border rounded bg-white">
                              <option value="" disabled selected>Selecione a Categoria</option>
                              <option value="Docinhos">Docinhos</option>
                              <option value="Bolos">Bolos</option>
                              <option value="Mousses">Mousses</option>
                              <option value="P√£es de Mel">P√£es de Mel</option>
                              <option value="Salgados">Salgados</option>
                              <option value="Outros">Outros</option>
                          </select>
                      </div>
                      
                      <!-- Sistema de Variantes de Sabores -->
                      <div>
                          <label class="block text-sm font-medium mb-1">Gerenciamento de Sabores:</label>
                          <div class="border rounded p-3 bg-rose-50">
                              <div class="flex items-center mb-2">
                                  <input type="radio" id="saboresSimples" name="tipoSabores" value="simples" checked class="mr-2" onchange="toggleSaboresMode('simples')" />
                                  <label for="saboresSimples" class="text-sm">Sabores Simples</label>
                                  <input type="radio" id="saboresVariantes" name="tipoSabores" value="variantes" class="ml-4 mr-2" onchange="toggleSaboresMode('variantes')" />
                                  <label for="saboresVariantes" class="text-sm">Variantes de Sabores</label>
                              </div>
                              
                              <!-- Modo Sabores Simples -->
                              <div id="saboresSimplesContainer">
                                  <label for="produtoSabores" class="block text-sm font-medium mb-1">Sabores dispon√≠veis (separados por v√≠rgula):</label>
                                  <input type="text" id="produtoSabores" placeholder="Ex: Chocolate, Morango, Lim√£o" class="p-2 border rounded w-full" />
                              </div>
                              
                              <!-- Modo Variantes de Sabores -->
                              <div id="saboresVariantesContainer" class="hidden">
                                  <div class="mb-2">
                                      <label class="block text-sm font-medium mb-1">Sabores Base (separados por v√≠rgula):</label>
                                      <input type="text" id="saboresBase" placeholder="Ex: Brigadeiro, Beijinho, Prest√≠gio" class="p-2 border rounded w-full" />
                                  </div>
                                  <div id="variantesContainer" class="space-y-2">
                                      <!-- Variantes ser√£o adicionadas aqui dinamicamente -->
                                  </div>
                                  <button type="button" id="adicionarVariante" class="mt-2 bg-rose-300 hover:bg-rose-400 text-white px-3 py-1 rounded text-sm" onclick="adicionarVarianteSabor()">+ Adicionar Variante</button>
                              </div>
                          </div>
                      </div>
                      
                      <div>
                          <label for="produtoDetalhes" class="block text-sm font-medium mb-1">Detalhes adicionais:</label>
                          <textarea id="produtoDetalhes" placeholder="Informa√ß√µes adicionais sobre o produto" class="p-2 border rounded w-full" rows="2"></textarea>
                      </div>
                      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                          <input type="number" id="produtoPreco" placeholder="Pre√ßo (R$)" class="p-2 border rounded" required min="0" step="0.01" />
                          <input type="text" id="produtoPromocao" placeholder="Promo√ß√£o (ex: 2 por R$20)" class="p-2 border rounded" />
                          <input type="number" id="produtoCusto" placeholder="Custo Estimado (R$)" class="p-2 border rounded" min="0" step="0.01" />
                      </div>
                      
                      <!-- Associar com Ficha T√©cnica -->
                      <div>
                          <label for="produtoFichaTecnica" class="block text-sm font-medium mb-1">Associar Ficha T√©cnica:</label>
                          <select id="produtoFichaTecnica" class="p-2 border rounded bg-white w-full">
                              <option value="">Nenhuma (opcional)</option>
                              <!-- Op√ß√µes ser√£o preenchidas via JavaScript -->
                          </select>
                      </div>
                      
                      <button type="submit" id="produtoSubmitButton" class="primary-button px-4 py-2 rounded">Adicionar Produto</button>
                      <button type="button" id="produtoCancelButton" class="secondary-button px-4 py-2 rounded hidden" onclick="cancelarEdicaoProduto()">Cancelar Edi√ß√£o</button>
                  </form>
              </div>

              <div class="card mb-4">
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                      <div>
                          <label for="filtroCategoriasProduto" class="block text-sm font-medium mb-1">Filtrar por categoria:</label>
                          <select id="filtroCategoriasProduto" class="p-2 border rounded bg-white w-full">
                              <option value="todas">Todas as categorias</option>
                              <option value="Docinhos">Docinhos</option>
                              <option value="Bolos">Bolos</option>
                              <option value="Mousses">Mousses</option>
                              <option value="P√£es de Mel">P√£es de Mel</option>
                              <option value="Salgados">Salgados</option>
                              <option value="Outros">Outros</option>
                          </select>
                      </div>
                      <div>
                          <label for="filtroSaboresProduto" class="block text-sm font-medium mb-1">Filtrar por sabor:</label>
                          <select id="filtroSaboresProduto" class="p-2 border rounded bg-white w-full">
                              <option value="todos">Todos os sabores</option>
                          </select>
                      </div>
                      <div>
                          <label for="buscarProduto" class="block text-sm font-medium mb-1">Buscar:</label>
                          <input type="text" id="buscarProduto" placeholder="Buscar por nome..." class="p-2 border rounded w-full" />
                      </div>
                  </div>
                  <div class="flex justify-end">
                      <button id="aplicarFiltrosProdutos" class="primary-button px-4 py-2 rounded">Aplicar Filtros</button>
                      <button id="limparFiltrosProdutos" class="secondary-button px-4 py-2 rounded ml-2">Limpar Filtros</button>
                  </div>
              </div>

              <div class="card">
                  <table class="w-full table-auto">
                    <thead>
                      <tr>
                        <th class="p-2 text-left">Produto</th>
                        <th class="p-2 text-left">Categoria</th>
                        <th class="p-2 text-left">Sabores</th>
                        <th class="p-2 text-left">Pre√ßo</th>
                        <th class="p-2 text-left">Custo</th>
                        <th class="p-2 text-left">Ficha T√©cnica</th>
                        <th class="p-2 text-left">A√ß√µes</th>
                      </tr>
                    </thead>
                    <tbody id="produtosTabela">
                    </tbody>
                  </table>
              </div>
          </div>
          
          <!-- Se√ß√£o de Fichas T√©cnicas -->
          <div id="secaoFichasTecnicas" class="hidden">
              <div class="card mb-6">
                  <h3 class="text-xl font-semibold mb-3">Adicionar/Editar Ficha T√©cnica</h3>
                  <form id="fichaTecnicaForm" class="space-y-3">
                      <input type="hidden" id="fichaTecnicaId" />
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <input type="text" id="fichaTecnicaNome" placeholder="Nome da Ficha T√©cnica" class="p-2 border rounded" required />
                          <select id="fichaTecnicaCategoria" class="p-2 border rounded bg-white">
                              <option value="" disabled selected>Selecione a Categoria</option>
                              <option value="Docinhos">Docinhos</option>
                              <option value="Bolos">Bolos</option>
                              <option value="Mousses">Mousses</option>
                              <option value="P√£es de Mel">P√£es de Mel</option>
                              <option value="Salgados">Salgados</option>
                              <option value="Outros">Outros</option>
                          </select>
                      </div>
                      
                      <div>
                          <label class="block text-sm font-medium mb-1">Ingredientes:</label>
                          <div id="ingredientesContainer" class="space-y-2 border rounded p-3 bg-rose-50">
                              <!-- Ingredientes ser√£o adicionados aqui dinamicamente -->
                          </div>
                          <button type="button" id="adicionarIngrediente" class="mt-2 bg-rose-300 hover:bg-rose-400 text-white px-3 py-1 rounded text-sm" onclick="adicionarIngrediente()">+ Adicionar Ingrediente</button>
                      </div>
                      
                      <div>
                          <label for="fichaTecnicaInstrucoes" class="block text-sm font-medium mb-1">Instru√ß√µes de Preparo:</label>
                          <textarea id="fichaTecnicaInstrucoes" placeholder="Passo a passo do preparo" class="p-2 border rounded w-full" rows="3"></textarea>
                      </div>
                      
                      <div>
                          <label for="fichaTecnicaRendimento" class="block text-sm font-medium mb-1">Rendimento:</label>
                          <div class="flex items-center">
                              <input type="number" id="fichaTecnicaRendimentoQtd" placeholder="Quantidade" class="p-2 border rounded w-24" min="1" />
                              <input type="text" id="fichaTecnicaRendimentoUnidade" placeholder="Unidade (ex: unidades, por√ß√µes)" class="p-2 border rounded ml-2 flex-grow" />
                          </div>
                      </div>
                      
                      <div class="border rounded p-3 bg-gray-50">
                          <h4 class="font-medium mb-2">Custo Total Calculado: <span id="custoTotalCalculado" class="text-rose-500">R$ 0.00</span></h4>
                          <p class="text-sm text-gray-600">O custo √© calculado automaticamente com base nos ingredientes e suas quantidades.</p>
                      </div>
                      
                      <button type="submit" id="fichaTecnicaSubmitButton" class="primary-button px-4 py-2 rounded">Adicionar Ficha T√©cnica</button>
                      <button type="button" id="fichaTecnicaCancelButton" class="secondary-button px-4 py-2 rounded hidden" onclick="cancelarEdicaoFichaTecnica()">Cancelar Edi√ß√£o</button>
                  </form>
              </div>
              
              <div class="card">
                  <table class="w-full table-auto">
                    <thead>
                      <tr>
                        <th class="p-2 text-left">Nome</th>
                        <th class="p-2 text-left">Categoria</th>
                        <th class="p-2 text-left">Ingredientes</th>
                        <th class="p-2 text-left">Rendimento</th>
                        <th class="p-2 text-left">Custo Total</th>
                        <th class="p-2 text-left">Custo Unit√°rio</th>
                        <th class="p-2 text-left">A√ß√µes</th>
                      </tr>
                    </thead>
                    <tbody id="fichasTecnicasTabela">
                    </tbody>
                  </table>
              </div>
          </div>
        </section>

        <!-- Se√ß√£o Estoque -->
        <section id="estoque" class="section hidden">
          <!-- Abas para alternar entre Estoque e Produ√ß√£o -->
          <div class="flex border-b border-rose-300 mb-4">
            <button id="abaEstoque" class="py-2 px-4 font-medium border-b-2 border-rose-500 text-rose-500" onclick="mostrarAbaEstoque('estoque')">Estoque</button>
            <button id="abaProducao" class="py-2 px-4 font-medium text-gray-600" onclick="mostrarAbaEstoque('producao')">Produ√ß√£o</button>
          </div>
          
          <!-- Se√ß√£o de Estoque -->
          <div id="secaoEstoque">
              <h2 class="text-2xl font-bold mb-4 section-header">Gerenciar Estoque</h2>
              
              <!-- Painel de Alertas de Estoque -->
              <div id="painelAlertasEstoque" class="mb-6 p-4 border-l-4 border-rose-500 bg-rose-50 rounded shadow-sm">
                  <h3 class="text-lg font-semibold mb-2 flex items-center">
                      <i data-lucide="alert-triangle" class="inline-block w-5 h-5 mr-2 text-rose-500"></i>
                      Alertas de Estoque
                  </h3>
                  <div id="alertasEstoqueDetalhado" class="space-y-1">
                      <!-- Alertas ser√£o inseridos aqui via JavaScript -->
                      <p class="text-sm text-gray-600">Nenhum alerta de estoque no momento.</p>
                  </div>
              </div>
              
              <form id="estoqueForm" class="mb-6 p-4 border rounded card">
                <h3 class="text-xl font-semibold mb-3">Adicionar/Editar Item ao Estoque</h3>
                <input type="hidden" id="itemId" />
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                  <input type="text" id="itemNome" placeholder="Nome do Item" class="p-2 border rounded" required />
                  <input type="number" id="itemQuantidade" placeholder="Quantidade" class="p-2 border rounded" required min="0" step="any" />
                  <input type="text" id="itemUnidade" placeholder="Unidade (ex: kg, unid)" class="p-2 border rounded" required />
                  <select id="itemTipo" class="p-2 border rounded bg-white" required>
                    <option value="" disabled selected>Tipo</option>
                    <option value="Mat√©ria-prima">Mat√©ria-prima</option>
                    <option value="Produto Pronto">Produto Pronto</option>
                    <option value="Embalagem">Embalagem</option>
                    <option value="Outro">Outro</option>
                  </select>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-3">
                    <div>
                        <label for="itemEstoqueMinimo" class="block text-sm font-medium mb-1">Estoque M√≠nimo (Alerta):</label>
                        <input type="number" id="itemEstoqueMinimo" placeholder="Opcional" class="p-2 border rounded w-full" min="0" step="any" />
                    </div>
                    <div>
                        <label for="itemEstoqueIdeal" class="block text-sm font-medium mb-1">Estoque Ideal:</label>
                        <input type="number" id="itemEstoqueIdeal" placeholder="Opcional" class="p-2 border rounded w-full" min="0" step="any" />
                    </div>
                    <div>
                        <label for="itemCustoUnitario" class="block text-sm font-medium mb-1">Custo Unit√°rio (R$):</label>
                        <input type="number" id="itemCustoUnitario" placeholder="Opcional" class="p-2 border rounded w-full" min="0" step="0.01" />
                    </div>
                </div>
                <div class="mt-3">
                    <label for="itemFornecedor" class="block text-sm font-medium mb-1">Fornecedor:</label>
                    <input type="text" id="itemFornecedor" placeholder="Nome do fornecedor (opcional)" class="p-2 border rounded w-full" />
                </div>
                <button type="submit" id="estoqueSubmitButton" class="primary-button mt-4 px-4 py-2 rounded">Adicionar Item</button>
                <button type="button" id="estoqueCancelButton" class="secondary-button mt-4 px-4 py-2 rounded hidden ml-2" onclick="cancelarEdicaoEstoque()">Cancelar Edi√ß√£o</button>
              </form>

              <h2 class="text-2xl font-bold mb-4 section-header">Estoque Atual</h2>
              <div class="card mb-4">
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                      <div>
                          <label for="filtroTipoEstoque" class="block text-sm font-medium mb-1">Filtrar por tipo:</label>
                          <select id="filtroTipoEstoque" class="p-2 border rounded bg-white w-full">
                              <option value="todos">Todos os tipos</option>
                              <option value="Mat√©ria-prima">Mat√©ria-prima</option>
                              <option value="Produto Pronto">Produto Pronto</option>
                              <option value="Embalagem">Embalagem</option>
                              <option value="Outro">Outro</option>
                          </select>
                      </div>
                      <div>
                          <label for="filtroEstoqueBaixo" class="block text-sm font-medium mb-1">Filtrar por n√≠vel:</label>
                          <select id="filtroEstoqueBaixo" class="p-2 border rounded bg-white w-full">
                              <option value="todos">Todos os n√≠veis</option>
                              <option value="baixo">Estoque baixo</option>
                              <option value="normal">Estoque normal</option>
                              <option value="ideal">Estoque ideal ou acima</option>
                          </select>
                      </div>
                      <div>
                          <label for="buscarEstoque" class="block text-sm font-medium mb-1">Buscar:</label>
                          <input type="text" id="buscarEstoque" placeholder="Buscar por nome..." class="p-2 border rounded w-full" />
                      </div>
                  </div>
                  <div class="flex justify-end">
                      <button id="aplicarFiltrosEstoque" class="primary-button px-4 py-2 rounded">Aplicar Filtros</button>
                      <button id="limparFiltrosEstoque" class="secondary-button px-4 py-2 rounded ml-2">Limpar Filtros</button>
                  </div>
              </div>
              <div class="card">
                  <div id="alertasEstoque" class="mb-4"></div> <!-- √Årea para alertas (legado) -->
                  <table class="w-full table-auto">
                    <thead>
                      <tr>
                        <th class="p-2 text-left">Item</th>
                        <th class="p-2 text-left">Quantidade</th>
                        <th class="p-2 text-left">Tipo</th>
                        <th class="p-2 text-left">Status</th>
                        <th class="p-2 text-left">Custo Unit.</th>
                        <th class="p-2 text-left">A√ß√µes</th>
                      </tr>
                    </thead>
                    <tbody id="estoqueTabela">
                    </tbody>
                  </table>
              </div>
              
              <!-- Hist√≥rico de Movimenta√ß√µes -->
              <h2 class="text-2xl font-bold mb-4 mt-6 section-header">Hist√≥rico de Movimenta√ß√µes</h2>
              <div class="card">
                  <table class="w-full table-auto">
                    <thead>
                      <tr>
                        <th class="p-2 text-left">Data</th>
                        <th class="p-2 text-left">Item</th>
                        <th class="p-2 text-left">Tipo</th>
                        <th class="p-2 text-left">Quantidade</th>
                        <th class="p-2 text-left">Opera√ß√£o</th>
                        <th class="p-2 text-left">Origem/Destino</th>
                      </tr>
                    </thead>
                    <tbody id="movimentacoesTabela">
                      <!-- Movimenta√ß√µes ser√£o inseridas aqui via JavaScript -->
                    </tbody>
                  </table>
              </div>
          </div>
          
          <!-- Se√ß√£o de Produ√ß√£o -->
          <div id="secaoProducao" class="hidden">
              <h2 class="text-2xl font-bold mb-4 section-header">Registrar Produ√ß√£o</h2>
              <div class="card mb-6">
                  <form id="producaoForm" class="space-y-3">
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                              <label for="producaoFichaTecnica" class="block text-sm font-medium mb-1">Selecione a Ficha T√©cnica:</label>
                              <select id="producaoFichaTecnica" class="p-2 border rounded bg-white w-full" required>
                                  <option value="" disabled selected>Escolha uma ficha t√©cnica</option>
                                  <!-- Op√ß√µes ser√£o preenchidas via JavaScript -->
                              </select>
                          </div>
                          <div>
                              <label for="producaoQuantidade" class="block text-sm font-medium mb-1">Quantidade a Produzir:</label>
                              <div class="flex items-center">
                                  <input type="number" id="producaoQuantidade" placeholder="Quantidade" class="p-2 border rounded flex-grow" required min="1" />
                                  <span id="producaoUnidade" class="ml-2 text-gray-600">unidades</span>
                              </div>
                          </div>
                      </div>
                      
                      <div class="border rounded p-3 bg-rose-50">
                          <h4 class="font-medium mb-2">Ingredientes Necess√°rios:</h4>
                          <div id="ingredientesNecessarios" class="space-y-1 text-sm">
                              <!-- Lista de ingredientes necess√°rios ser√° inserida aqui -->
                              <p class="text-gray-600">Selecione uma ficha t√©cnica para ver os ingredientes necess√°rios.</p>
                          </div>
                      </div>
                      
                      <div class="border rounded p-3 bg-gray-50">
                          <h4 class="font-medium mb-2">Verifica√ß√£o de Estoque:</h4>
                          <div id="verificacaoEstoque" class="space-y-1 text-sm">
                              <!-- Resultado da verifica√ß√£o de estoque ser√° inserido aqui -->
                              <p class="text-gray-600">Selecione uma ficha t√©cnica e quantidade para verificar disponibilidade.</p>
                          </div>
                      </div>
                      
                      <div class="flex justify-between items-center">
                          <button type="button" id="verificarEstoqueBtn" class="secondary-button px-4 py-2 rounded" onclick="verificarEstoqueProducao()">Verificar Disponibilidade</button>
                          <button type="submit" id="registrarProducaoBtn" class="primary-button px-4 py-2 rounded">Registrar Produ√ß√£o</button>
                      </div>
                  </form>
              </div>
              
              <h2 class="text-2xl font-bold mb-4 section-header">Hist√≥rico de Produ√ß√£o</h2>
              <div class="card">
                  <table class="w-full table-auto">
                    <thead>
                      <tr>
                        <th class="p-2 text-left">Data</th>
                        <th class="p-2 text-left">Produto</th>
                        <th class="p-2 text-left">Quantidade</th>
                        <th class="p-2 text-left">Custo Total</th>
                        <th class="p-2 text-left">Custo Unit√°rio</th>
                      </tr>
                    </thead>
                    <tbody id="historicoProducaoTabela">
                      <!-- Hist√≥rico ser√° inserido aqui via JavaScript -->
                    </tbody>
                  </table>
              </div>
          </div>
        </section>

        <!-- Se√ß√£o Clientes -->
        <section id="clientes" class="section hidden">
          <h2 class="text-2xl font-bold mb-4 section-header">Clientes</h2>
          <div class="card mb-6">
              <h3 class="text-xl font-semibold mb-3">Adicionar/Editar Cliente</h3>
              <form id="clienteForm" class="space-y-3">
                  <input type="hidden" id="clienteId" />
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <input type="text" id="clienteNome" placeholder="Nome do Cliente" class="p-2 border rounded" required />
                      <input type="tel" id="clienteTelefone" placeholder="Telefone/WhatsApp" class="p-2 border rounded" />
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <input type="email" id="clienteEmail" placeholder="E-mail" class="p-2 border rounded" />
                      <input type="text" id="clienteEndereco" placeholder="Endere√ßo" class="p-2 border rounded" />
                  </div>
                  <div>
                      <label for="clienteObservacoes" class="block text-sm font-medium mb-1">Observa√ß√µes:</label>
                      <textarea id="clienteObservacoes" placeholder="Prefer√™ncias, restri√ß√µes alimentares, etc." class="p-2 border rounded w-full" rows="2"></textarea>
                  </div>
                  <div>
                      <label class="block text-sm font-medium mb-1">Sistema de Fidelidade:</label>
                      <div class="flex items-center space-x-1">
                          <span>Estrelas:</span>
                          <div id="clienteEstrelas" class="flex">
                              <button type="button" class="text-gray-300 hover:text-yellow-400" data-estrela="1">‚òÖ</button>
                              <button type="button" class="text-gray-300 hover:text-yellow-400" data-estrela="2">‚òÖ</button>
                              <button type="button" class="text-gray-300 hover:text-yellow-400" data-estrela="3">‚òÖ</button>
                              <button type="button" class="text-gray-300 hover:text-yellow-400" data-estrela="4">‚òÖ</button>
                              <button type="button" class="text-gray-300 hover:text-yellow-400" data-estrela="5">‚òÖ</button>
                          </div>
                          <input type="hidden" id="clienteEstrelasValor" value="0" />
                      </div>
                  </div>
                  <button type="submit" id="clienteSubmitButton" class="primary-button px-4 py-2 rounded">Adicionar Cliente</button>
                  <button type="button" id="clienteCancelButton" class="secondary-button px-4 py-2 rounded hidden" onclick="cancelarEdicaoCliente()">Cancelar Edi√ß√£o</button>
              </form>
          </div>

          <div class="card mb-4">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                  <div>
                      <label for="filtroEstrelas" class="block text-sm font-medium mb-1">Filtrar por estrelas:</label>
                      <select id="filtroEstrelas" class="p-2 border rounded bg-white w-full">
                          <option value="todas">Todas as estrelas</option>
                          <option value="1">1 estrela ou mais</option>
                          <option value="2">2 estrelas ou mais</option>
                          <option value="3">3 estrelas ou mais</option>
                          <option value="4">4 estrelas ou mais</option>
                          <option value="5">5 estrelas</option>
                      </select>
                  </div>
                  <div>
                      <label for="buscarCliente" class="block text-sm font-medium mb-1">Buscar:</label>
                      <input type="text" id="buscarCliente" placeholder="Buscar por nome, telefone ou e-mail..." class="p-2 border rounded w-full" />
                  </div>
              </div>
              <div class="flex justify-end">
                  <button id="aplicarFiltrosClientes" class="primary-button px-4 py-2 rounded">Aplicar Filtros</button>
                  <button id="limparFiltrosClientes" class="secondary-button px-4 py-2 rounded ml-2">Limpar Filtros</button>
              </div>
          </div>

          <div class="card">
              <table class="w-full table-auto">
                <thead>
                  <tr>
                    <th class="p-2 text-left">Nome</th>
                    <th class="p-2 text-left">Telefone</th>
                    <th class="p-2 text-left">E-mail</th>
                    <th class="p-2 text-left">Fidelidade</th>
                    <th class="p-2 text-left">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody id="clientesTabela">
                    <!-- Conte√∫do gerado via JS -->
                </tbody>
              </table>
          </div>
        </section>

        <!-- Se√ß√£o Relat√≥rios -->
        <section id="relatorios" class="section hidden">
          <h2 class="text-2xl font-bold mb-4 section-header">Relat√≥rios</h2>
           <div class="card mb-4">
               <p>Em breve: Relat√≥rios detalhados de vendas, estoque e clientes.</p>
           </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
             <div class="card">
                <h3 class="font-semibold mb-2">Produtos Mais Vendidos (Exemplo)</h3>
                <canvas id="produtosVendidosChart"></canvas>
             </div>
             <div class="card">
                <h3 class="font-semibold mb-2">N√≠vel de Estoque (Exemplo)</h3>
                <canvas id="nivelEstoqueChart"></canvas>
             </div>
          </div>
        </section>

        <!-- Se√ß√£o Gr√°ficos e An√°lises -->
        <section id="graficos_avancados" class="section hidden">
            <h2 class="text-2xl font-bold mb-4 section-header">Gr√°ficos e An√°lises</h2>
            <div class="card mb-6">
                <h3 class="text-xl font-semibold mb-3">Configura√ß√µes do Gr√°fico</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="graficoTipo" class="block text-sm font-medium mb-1">Tipo de gr√°fico:</label>
                        <select id="graficoTipo" class="p-2 border rounded bg-white w-full">
                            <option value="bar">Barra</option>
                            <option value="line">Linha</option>
                            <option value="pie">Pizza</option>
                            <option value="doughnut">Rosca</option>
                            <option value="polarArea">√Årea Polar</option>
                            <option value="radar">Radar</option>
                        </select>
                    </div>
                    <div>
                        <label for="graficoDados" class="block text-sm font-medium mb-1">Dados a visualizar:</label>
                        <select id="graficoDados" class="p-2 border rounded bg-white w-full">
                            <option value="vendas_semanais">Vendas Semanais (Valor)</option>
                            <option value="vendas_mensais">Vendas Mensais (Valor)</option>
                            <option value="vendas_diarias">Vendas Di√°rias (Valor)</option>
                            <option value="produtos_vendidos_qtd">Produtos Mais Vendidos (Qtd)</option>
                            <option value="produtos_vendidos_valor">Produtos Mais Vendidos (Valor)</option>
                            <option value="nivel_estoque">N√≠vel de Estoque (Itens)</option>
                            <option value="lucratividade_produto">Lucratividade por Produto</option>
                            <option value="vendas_por_categoria">Vendas por Categoria</option>
                            <option value="vendas_por_cliente">Vendas por Cliente</option>
                            <option value="metas_realizadas">Metas vs Realizado</option>
                        </select>
                    </div>
                </div>
                
                <div id="opcoesAvancadas" class="border-t pt-4 mt-4">
                    <h4 class="font-medium mb-2">Op√ß√µes Avan√ßadas</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="filtroDataInicio" class="block text-sm font-medium mb-1">Data inicial:</label>
                            <input type="date" id="filtroDataInicio" class="p-2 border rounded w-full" />
                        </div>
                        <div>
                            <label for="filtroDataFim" class="block text-sm font-medium mb-1">Data final:</label>
                            <input type="date" id="filtroDataFim" class="p-2 border rounded w-full" />
                        </div>
                        <div>
                            <label for="limiteDados" class="block text-sm font-medium mb-1">Limite de dados:</label>
                            <select id="limiteDados" class="p-2 border rounded bg-white w-full">
                                <option value="5">Top 5</option>
                                <option value="10" selected>Top 10</option>
                                <option value="20">Top 20</option>
                                <option value="0">Todos</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <label for="produtosComparar" class="block text-sm font-medium mb-1">Comparar produtos espec√≠ficos:</label>
                        <select id="produtosComparar" class="p-2 border rounded bg-white w-full" multiple>
                            <!-- Op√ß√µes ser√£o preenchidas via JavaScript -->
                        </select>
                        <p class="text-xs text-gray-500 mt-1">Segure Ctrl (ou Cmd) para selecionar m√∫ltiplos produtos</p>
                    </div>
                </div>
                
                <div class="flex justify-end mt-4">
                    <button onclick="atualizarGraficoAvancado()" class="primary-button px-4 py-2 rounded">Gerar Gr√°fico</button>
                    <button onclick="exportarGrafico()" class="secondary-button px-4 py-2 rounded ml-2">Exportar Gr√°fico</button>
                </div>
            </div>
            <div class="card mb-6">
                <canvas id="graficoAvancadoCanvas"></canvas>
            </div>
        </section>

        <!-- Se√ß√£o Meta Di√°ria -->
        <section id="meta" class="section hidden">
          <h2 class="text-2xl font-bold mb-4 section-header">Meta Di√°ria</h2>
          <div class="card">
              <label for="metaInput" class="block mb-2 font-semibold">Definir Meta de vendas di√°rias (R$):</label>
              <input type="number" id="metaInput" class="p-2 border rounded mb-4" value="100" min="0" />
              <p class="mb-2">Progresso da Meta:</p>
              <div id="progressoMeta" class="w-full bg-rose-100 h-6 rounded overflow-hidden">
                <div id="barraMeta" class="bg-rose-400 h-6 text-center text-white text-sm">0%</div>
              </div>
          </div>
        </section>


      </main>
    </div>

    <!-- P√°gina da Interface da IA (ser√° exibida quando o bot√£o Jeh AI for clicado) -->
    <div id="jeh_ai_interface" class="hidden fixed inset-0 bg-white z-50 overflow-auto">
      <div class="max-w-4xl mx-auto p-6">
        <div class="flex justify-between items-center mb-6">
          <h1 class="text-3xl brand-font text-center text-rose-500">Jeh AI - Assistente de Vendas</h1>
          <button onclick="voltarAoPainel()" class="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded">
            Voltar ao Painel
          </button>
        </div>
        
        <div class="card mb-6">
          <h2 class="text-xl font-semibold mb-4">Bem-vindo √† Jeh AI</h2>
          <p class="mb-4">Esta √© a interface da sua assistente de vendas inteligente. Em breve, esta IA estar√° integrada com:</p>
          <ul class="list-disc pl-6 mb-4 space-y-2">
            <li>API de Chat do GPT para atendimento personalizado</li>
            <li>WhatsApp para comunica√ß√£o direta com clientes</li>
            <li>Instagram e Facebook para gerenciamento de redes sociais</li>
            <li>iFood para integra√ß√£o com pedidos online</li>
          </ul>
          <p>Estamos trabalhando para trazer a melhor experi√™ncia de vendas automatizada para o seu neg√≥cio!</p>
        </div>
        
        <div class="card">
          <h2 class="text-xl font-semibold mb-4">Recursos em Desenvolvimento</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="border rounded p-4 bg-rose-50">
              <h3 class="font-medium mb-2">Atendimento Automatizado</h3>
              <p>Responda perguntas frequentes, forne√ßa informa√ß√µes sobre produtos e pre√ßos, e agende pedidos automaticamente.</p>
            </div>
            <div class="border rounded p-4 bg-purple-50">
              <h3 class="font-medium mb-2">Gest√£o de Pedidos</h3>
              <p>Receba, confirme e acompanhe pedidos de m√∫ltiplos canais em um √∫nico lugar.</p>
            </div>
            <div class="border rounded p-4 bg-teal-50">
              <h3 class="font-medium mb-2">Marketing Personalizado</h3>
              <p>Envie promo√ß√µes e recomenda√ß√µes personalizadas com base no hist√≥rico de compras dos clientes.</p>
            </div>
            <div class="border rounded p-4 bg-yellow-50">
              <h3 class="font-medium mb-2">An√°lise de Dados</h3>
              <p>Obtenha insights valiosos sobre o comportamento dos clientes e tend√™ncias de vendas.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      lucide.createIcons();

      // Fun√ß√£o para mostrar se√ß√µes
      function showSection(sectionId) {
        document.querySelectorAll('.section').forEach(section => section.classList.add('hidden'));
        const sectionToShow = document.getElementById(sectionId);
        if (sectionToShow) sectionToShow.classList.remove('hidden');
        else document.getElementById('inicio_dashboard').classList.remove('hidden');
      }

      // Fun√ß√£o para mostrar a interface da Jeh AI
      function mostrarJehAI() {
        document.querySelector('.flex.h-screen').classList.add('hidden');
        document.getElementById('jeh_ai_interface').classList.remove('hidden');
      }

      // Fun√ß√£o para voltar ao painel principal
      function voltarAoPainel() {
        document.getElementById('jeh_ai_interface').classList.add('hidden');
        document.querySelector('.flex.h-screen').classList.remove('hidden');
      }

      const STORAGE_KEY = 'docesDaJessData_v2'; // Incrementa vers√£o se estrutura mudar
      let appData = {
          vendas: [],
          estoque: [],
          produtos: [],
          metaDiaria: 100,
          config: { logoUrl: null }
      };

      // --- DOM Elements --- (Simplified for brevity)
      const vendasTabelaBody = document.getElementById('vendasTabela');
      const produtoVendaSelect = document.getElementById('produtoVenda');
      const produtosTabelaBody = document.getElementById('produtosTabela');
      const produtoForm = document.getElementById('produtoForm');
      const estoqueTabelaBody = document.getElementById('estoqueTabela');
      const estoqueForm = document.getElementById('estoqueForm');
      const metaInput = document.getElementById('metaInput');
      const barraMeta = document.getElementById('barraMeta');
      const logoInput = document.getElementById('logoInput');
      const logoPreview = document.getElementById('logoPreview');
      const vendasChartCanvas = document.getElementById('vendasChart')?.getContext('2d');
      const lucroTotalSpan = document.getElementById('lucroTotal');
      const graficoAvancadoCanvas = document.getElementById('graficoAvancadoCanvas')?.getContext('2d');
      const graficoTipoSelect = document.getElementById('graficoTipo');
      const graficoDadosSelect = document.getElementById('graficoDados');
      const alertasEstoqueDiv = document.getElementById('alertasEstoque');
      const analisesSugestoesDiv = document.getElementById('analisesSugestoes');

      // --- Data Functions --- 
      function salvarDados() {
          try {
              localStorage.setItem(STORAGE_KEY, JSON.stringify(appData));
          } catch (error) {
              console.error("Erro ao salvar dados no localStorage:", error);
              alert("Erro ao salvar dados. Verifique se o localStorage est√° habilitado e n√£o est√° cheio.");
          }
      }

      function carregarDados() {
          const dadosSalvos = localStorage.getItem(STORAGE_KEY);
          if (dadosSalvos) {
              try {
                  appData = JSON.parse(dadosSalvos);
                  // Default values for potentially missing keys in older data
                  appData.vendas = appData.vendas || [];
                  appData.estoque = appData.estoque || [];
                  appData.produtos = appData.produtos || [];
                  appData.metaDiaria = appData.metaDiaria || 100;
                  appData.config = appData.config || { logoUrl: null };
                  // Ensure IDs exist
                  appData.estoque.forEach((item, index) => item.id = item.id || gerarIdUnico('est', index));
                  appData.produtos.forEach((item, index) => item.id = item.id || gerarIdUnico('prod', index));
                  appData.vendas.forEach((item, index) => item.id = item.id || gerarIdUnico('venda', index));
              } catch (error) {
                  console.error("Erro ao carregar dados do localStorage:", error);
                  alert("Erro ao carregar dados salvos. Os dados podem estar corrompidos. Iniciando com dados padr√£o.");
                  inicializarDadosPadrao(); // Reset to default if parsing fails
              }
          } else {
              inicializarDadosPadrao();
          }
      }

      function inicializarDadosPadrao() {
           appData = {
              vendas: [],
              estoque: [
                { id: gerarIdUnico('est'), nome: 'Forminhas', quantidade: 500, unidade: 'unid', tipo: 'Embalagem', estoqueMinimo: 100 },
                { id: gerarIdUnico('est'), nome: 'Chocolate ao Leite', quantidade: 2.5, unidade: 'kg', tipo: 'Mat√©ria-prima', estoqueMinimo: 1 },
                { id: gerarIdUnico('est'), nome: 'Leite Condensado', quantidade: 5, unidade: 'latas', tipo: 'Mat√©ria-prima', estoqueMinimo: 2 }
              ],
              produtos: [
                { id: gerarIdUnico('prod'), nome: 'Brigadeiro', categoria: 'Docinhos', sabores: 'Tradicional, Branco', preco: 3.50, custo: 1.20 },
                { id: gerarIdUnico('prod'), nome: 'Bolo de Chocolate', categoria: 'Bolos', sabores: 'Chocolate, Morango', preco: 45.00, custo: 20.00 }
              ],
              metaDiaria: 100,
              config: { logoUrl: null }
          };
      }

      function gerarIdUnico(prefix, index) {
          return prefix + '_' + (index !== undefined ? index : Date.now() + Math.floor(Math.random() * 1000));
      }

      // Fun√ß√£o para exportar dados
      function exportarDados() {
          try {
              const dataStr = JSON.stringify(appData);
              const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
              
              const exportFileDefaultName = 'doces_da_jess_dados.json';
              
              const linkElement = document.createElement('a');
              linkElement.setAttribute('href', dataUri);
              linkElement.setAttribute('download', exportFileDefaultName);
              linkElement.click();
          } catch (error) {
              console.error("Erro ao exportar dados:", error);
              alert("Erro ao exportar dados: " + error.message);
          }
      }

      // Fun√ß√£o para importar dados
      function importarDados(event) {
          const file = event.target.files[0];
          if (!file) return;
          
          const reader = new FileReader();
          reader.onload = function(e) {
              try {
                  const data = JSON.parse(e.target.result);
                  // Valida√ß√£o b√°sica
                  if (!data.vendas || !data.estoque || !data.produtos) {
                      throw new Error("Arquivo de dados inv√°lido ou incompleto");
                  }
                  
                  appData = data;
                  salvarDados();
                  alert("Dados importados com sucesso!");
                  location.reload(); // Recarrega a p√°gina para atualizar todos os componentes
              } catch (error) {
                  console.error("Erro ao importar dados:", error);
                  alert("Erro ao importar dados: " + error.message);
              }
          };
          reader.readAsText(file);
      }

      // Fun√ß√£o para mostrar abas na se√ß√£o de produtos
      function mostrarAba(aba) {
          if (aba === 'produtos') {
              document.getElementById('secaoProdutos').classList.remove('hidden');
              document.getElementById('secaoFichasTecnicas').classList.add('hidden');
              document.getElementById('abaProdutos').classList.add('border-b-2', 'border-rose-500', 'text-rose-500');
              document.getElementById('abaFichasTecnicas').classList.remove('border-b-2', 'border-rose-500', 'text-rose-500');
              document.getElementById('abaFichasTecnicas').classList.add('text-gray-600');
          } else {
              document.getElementById('secaoProdutos').classList.add('hidden');
              document.getElementById('secaoFichasTecnicas').classList.remove('hidden');
              document.getElementById('abaFichasTecnicas').classList.add('border-b-2', 'border-rose-500', 'text-rose-500');
              document.getElementById('abaProdutos').classList.remove('border-b-2', 'border-rose-500', 'text-rose-500');
              document.getElementById('abaProdutos').classList.add('text-gray-600');
          }
      }

      // Fun√ß√£o para mostrar abas na se√ß√£o de estoque
      function mostrarAbaEstoque(aba) {
          if (aba === 'estoque') {
              document.getElementById('secaoEstoque').classList.remove('hidden');
              document.getElementById('secaoProducao').classList.add('hidden');
              document.getElementById('abaEstoque').classList.add('border-b-2', 'border-rose-500', 'text-rose-500');
              document.getElementById('abaProducao').classList.remove('border-b-2', 'border-rose-500', 'text-rose-500');
              document.getElementById('abaProducao').classList.add('text-gray-600');
          } else {
              document.getElementById('secaoEstoque').classList.add('hidden');
              document.getElementById('secaoProducao').classList.remove('hidden');
              document.getElementById('abaProducao').classList.add('border-b-2', 'border-rose-500', 'text-rose-500');
              document.getElementById('abaEstoque').classList.remove('border-b-2', 'border-rose-500', 'text-rose-500');
              document.getElementById('abaEstoque').classList.add('text-gray-600');
          }
      }

      // Inicializa√ß√£o
      document.addEventListener('DOMContentLoaded', function() {
          carregarDados();
          
          // Inicializar logo se existir
          if (appData.config.logoUrl) {
              document.getElementById('logoPreview').src = appData.config.logoUrl;
              document.getElementById('logoPreview').classList.remove('hidden');
              document.getElementById('sidebarLogo').src = appData.config.logoUrl;
          }
          
          // Inicializar meta
          if (appData.metaDiaria) {
              metaInput.value = appData.metaDiaria;
          }
          
          // Mostrar se√ß√£o inicial
          showSection('inicio_dashboard');
          
          // Inicializar an√°lises e sugest√µes
          atualizarAnalisesSugestoes();
      });

      // Fun√ß√£o para atualizar an√°lises e sugest√µes
      function atualizarAnalisesSugestoes() {
          if (!analisesSugestoesDiv) return;
          
          const analises = [];
          
          // Verificar estoque baixo
          const itensBaixoEstoque = appData.estoque.filter(item => 
              item.estoqueMinimo && item.quantidade <= item.estoqueMinimo
          );
          
          if (itensBaixoEstoque.length > 0) {
              analises.push(`<div class="p-2 bg-red-50 border-l-4 border-red-500 rounded">
                  <h4 class="font-medium">Alerta de Estoque Baixo</h4>
                  <p>${itensBaixoEstoque.length} item(ns) com estoque abaixo do m√≠nimo.</p>
              </div>`);
          }
          
          // Calcular produtos mais vendidos
          if (appData.vendas.length > 0) {
              const produtosVendidos = {};
              appData.vendas.forEach(venda => {
                  produtosVendidos[venda.produto] = (produtosVendidos[venda.produto] || 0) + venda.quantidade;
              });
              
              const produtosMaisVendidos = Object.entries(produtosVendidos)
                  .sort((a, b) => b[1] - a[1])
                  .slice(0, 3);
              
              if (produtosMaisVendidos.length > 0) {
                  analises.push(`<div class="p-2 bg-green-50 border-l-4 border-green-500 rounded">
                      <h4 class="font-medium">Produtos Mais Vendidos</h4>
                      <p>Seu produto mais popular √© "${produtosMaisVendidos[0][0]}" com ${produtosMaisVendidos[0][1]} unidades vendidas.</p>
                  </div>`);
              }
          }
          
          // Verificar meta di√°ria
          const hoje = new Date().toISOString().split('T')[0];
          const vendasHoje = appData.vendas.filter(venda => venda.data === hoje);
          const totalVendasHoje = vendasHoje.reduce((total, venda) => total + parseFloat(venda.valor), 0);
          const percentualMeta = (totalVendasHoje / appData.metaDiaria) * 100;
          
          if (percentualMeta < 50) {
              analises.push(`<div class="p-2 bg-yellow-50 border-l-4 border-yellow-500 rounded">
                  <h4 class="font-medium">Meta Di√°ria</h4>
                  <p>Voc√™ atingiu apenas ${percentualMeta.toFixed(1)}% da sua meta di√°ria. Considere promover seus produtos mais populares.</p>
              </div>`);
          } else if (percentualMeta >= 100) {
              analises.push(`<div class="p-2 bg-blue-50 border-l-4 border-blue-500 rounded">
                  <h4 class="font-medium">Meta Di√°ria Alcan√ßada!</h4>
                  <p>Parab√©ns! Voc√™ atingiu ${percentualMeta.toFixed(1)}% da sua meta di√°ria.</p>
              </div>`);
          }
          
          // Adicionar sugest√µes gerais
          analises.push(`<div class="p-2 bg-purple-50 border-l-4 border-purple-500 rounded">
              <h4 class="font-medium">Sugest√£o de Marketing</h4>
              <p>Considere criar uma promo√ß√£o para os produtos menos vendidos ou oferecer descontos para compras em quantidade.</p>
          </div>`);
          
          // Atualizar o conte√∫do
          analisesSugestoesDiv.innerHTML = analises.join('');
      }

      // Inicializa√ß√£o adicional (simulada para exemplo)
      // Na pr√°tica, estas fun√ß√µes seriam implementadas completamente
      function verificarEstoqueVenda() {
          alert("Verifica√ß√£o de estoque simulada. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      function verificarEstoqueProducao() {
          alert("Verifica√ß√£o de estoque de produ√ß√£o simulada. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      function adicionarVarianteSabor() {
          alert("Adi√ß√£o de variante simulada. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      function adicionarIngrediente() {
          alert("Adi√ß√£o de ingrediente simulada. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      function cancelarEdicaoProduto() {
          alert("Cancelamento de edi√ß√£o simulado. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      function cancelarEdicaoFichaTecnica() {
          alert("Cancelamento de edi√ß√£o simulado. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      function cancelarEdicaoEstoque() {
          alert("Cancelamento de edi√ß√£o simulado. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      function cancelarEdicaoCliente() {
          alert("Cancelamento de edi√ß√£o simulado. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      function atualizarGraficoAvancado() {
          alert("Atualiza√ß√£o de gr√°fico simulada. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      function exportarGrafico() {
          alert("Exporta√ß√£o de gr√°fico simulada. Esta funcionalidade estaria completa na implementa√ß√£o final.");
      }
      
      // Fun√ß√£o para abrir o modal da Jeh AI
      function abrirJehAI() {
          document.getElementById('jehaiModal').style.display = 'flex';
          // Limpar chat anterior
          document.getElementById('jehaiChatContainer').innerHTML = `
              <div class="text-center text-gray-500 py-8">
                  <i data-lucide="message-square" class="w-12 h-12 mx-auto mb-2 opacity-50"></i>
                  <p>Ol√°! Sou a Jeh AI, sua vendedora virtual! üíï</p>
                  <p class="text-sm mt-2">Como posso te ajudar hoje?</p>
              </div>
          `;
          lucide.createIcons();
      }
      
      // Fun√ß√£o para fechar o modal da Jeh AI
      function fecharJehAI() {
          document.getElementById('jehaiModal').style.display = 'none';
      }
      
      // Fun√ß√£o para enviar mensagem para a Jeh AI
      async function enviarMensagemJehAI() {
          const input = document.getElementById('jehaiMessageInput');
          const message = input.value.trim();
          
          if (!message) return;
          
          // Adicionar mensagem do usu√°rio ao chat
          adicionarMensagemJehAI(message, 'user');
          input.value = '';
          
          // Mostrar indicador de digita√ß√£o
          const typingId = adicionarIndicadorDigitacao();
          
          try {
              const response = await fetch('https://vgh0i1cjl78y.manus.space/api/jehai/chat', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json'
                  },
                  body: JSON.stringify({ message })
              });
              
              const data = await response.json();
              
              // Remover indicador de digita√ß√£o
              removerIndicadorDigitacao(typingId);
              
              if (data.success) {
                  adicionarMensagemJehAI(data.response, 'jehai');
              } else {
                  adicionarMensagemJehAI('Desculpe, ocorreu um erro. Tente novamente.', 'jehai');
              }
          } catch (error) {
              removerIndicadorDigitacao(typingId);
              adicionarMensagemJehAI('Erro de conex√£o. Verifique se a Jeh AI est√° online.', 'jehai');
              console.error('Erro no chat da Jeh AI:', error);
          }
      }
      
      // Fun√ß√£o para adicionar mensagem ao chat
      function adicionarMensagemJehAI(message, sender) {
          const container = document.getElementById('jehaiChatContainer');
          
          // Limpar mensagem de boas-vindas se existir
          if (container.querySelector('.text-center')) {
              container.innerHTML = '';
          }
          
          const messageDiv = document.createElement('div');
          messageDiv.className = `jehai-message-${sender} p-3 rounded-lg mb-3 fade-in`;
          messageDiv.textContent = message;
          
          container.appendChild(messageDiv);
          container.scrollTop = container.scrollHeight;
      }
      
      // Fun√ß√£o para adicionar indicador de digita√ß√£o
      function adicionarIndicadorDigitacao() {
          const container = document.getElementById('jehaiChatContainer');
          const typingDiv = document.createElement('div');
          const id = 'typing-' + Date.now();
          
          typingDiv.id = id;
          typingDiv.className = 'jehai-message-jehai p-3 rounded-lg mb-3';
          typingDiv.innerHTML = '<i data-lucide="loader" class="w-4 h-4 animate-spin inline mr-2"></i>Jeh AI est√° digitando...';
          
          container.appendChild(typingDiv);
          container.scrollTop = container.scrollHeight;
          lucide.createIcons();
          
          return id;
      }
      
      // Fun√ß√£o para remover indicador de digita√ß√£o
      function removerIndicadorDigitacao(id) {
          const element = document.getElementById(id);
          if (element) {
              element.remove();
          }
      }
      
      // Fun√ß√£o para teste r√°pido da Jeh AI
      function testeRapidoJehAI(message) {
          document.getElementById('jehaiMessageInput').value = message;
          enviarMensagemJehAI();
      }
      
      // Fun√ß√£o para lidar com Enter no input da Jeh AI
      function handleJehAIKeyPress(event) {
          if (event.key === 'Enter') {
              enviarMensagemJehAI();
          }
      }
    </script>

    <!-- Modal da Jeh AI -->
    <div id="jehaiModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" style="display: none;">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col">
            <!-- Header do Modal -->
            <div class="bg-gradient-to-r from-pink-400 to-purple-500 text-white p-4 rounded-t-xl flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                        <i data-lucide="bot" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg brand-font">Jeh AI</h3>
                        <p class="text-sm opacity-90">Sua vendedora virtual</p>
                    </div>
                </div>
                <button onclick="fecharJehAI()" class="text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            
            <!-- Chat Container -->
            <div id="jehaiChatContainer" class="flex-1 p-4 overflow-y-auto max-h-96">
                <div class="text-center text-gray-500 py-8">
                    <i data-lucide="message-square" class="w-12 h-12 mx-auto mb-2 opacity-50"></i>
                    <p>Ol√°! Sou a Jeh AI, sua vendedora virtual! üíï</p>
                    <p class="text-sm mt-2">Como posso te ajudar hoje?</p>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="p-4 border-t">
                <div class="flex space-x-2 mb-3">
                    <input 
                        type="text" 
                        id="jehaiMessageInput" 
                        placeholder="Digite sua mensagem..." 
                        class="flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-300 text-sm"
                        onkeypress="handleJehAIKeyPress(event)"
                    >
                    <button 
                        onclick="enviarMensagemJehAI()" 
                        class="bg-gradient-to-r from-pink-400 to-purple-500 text-white px-4 py-2 rounded-lg hover:from-pink-500 hover:to-purple-600 transition-all"
                    >
                        <i data-lucide="send" class="w-4 h-4"></i>
                    </button>
                </div>
                
                <!-- Bot√µes de Teste R√°pido -->
                <div class="flex flex-wrap gap-1">
                    <button onclick="testeRapidoJehAI('O que voc√™s t√™m pra vender?')" class="bg-teal-400 text-white px-2 py-1 text-xs rounded-full hover:bg-teal-500 transition-all">
                        Produtos
                    </button>
                    <button onclick="testeRapidoJehAI('Onde voc√™s ficam?')" class="bg-teal-400 text-white px-2 py-1 text-xs rounded-full hover:bg-teal-500 transition-all">
                        Localiza√ß√£o
                    </button>
                    <button onclick="testeRapidoJehAI('Aceita Pix?')" class="bg-teal-400 text-white px-2 py-1 text-xs rounded-full hover:bg-teal-500 transition-all">
                        Pagamento
                    </button>
                    <button onclick="testeRapidoJehAI('Qual o WhatsApp?')" class="bg-teal-400 text-white px-2 py-1 text-xs rounded-full hover:bg-teal-500 transition-all">
                        Contato
                    </button>
                </div>
            </div>
        </div>
    </div>

    <style>
        .jehai-message-user {
            background: var(--cor-turquesa);
            color: white;
            margin-left: auto;
            max-width: 80%;
        }
        
        .jehai-message-jehai {
            background: var(--cor-principal-rosa);
            color: var(--cor-texto-escuro);
            margin-right: auto;
            max-width: 80%;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
  </body>
</html>

